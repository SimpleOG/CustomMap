# Описание подхода к решению задачи

Данная статья описывает шаги , которые я предпринял для решения задачи. В итоге пришел к выводу, что задачу решить невозможно(имея только предоставленные данные)

### Первый случай
Для первого случая было допущено, что  последовательность значений, которые есть у клиента - распределенна равномерно

Я рассмотрел отрезок всех значений клиента:

>А__________________________________B

Мат.ожидание случайного числа для данного случая составляло бы 5000(среднее)*N(число генераций)

Взяв произвольную переменную  С  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C   
A____________|_________________B

Интересующий нас отрезок - АС. 
Для того чтобы понимать какое среднее значение (Мат.Ожидание) будет сгенерировано на этом промежутке , я вычислил $\frac{A+C}{2}$ .  

Далее я вычислил сколько из этих чисел попало в промежуток от A до C.   
Для начала посчитал вероятность, что числа попадут в промежуток - P(AC)=1-P(CB)=1 - $\frac{CB}{AB}$ = $\frac{AC}{AB}$  
Кол-во значений в таком случае =    $\frac{AC}{AB}$* N, где N - кол-во значений  



Исходя из данных вычислений можно сделать вывод, что sum1 = $\frac{A+C}{2}$ * $\frac{AC}{AB}$*N.   
Так как формула буквально отражает итоговое значение из  тех чисел, которые прошли проверку и не превратились в О  
Итог по формуле  : Из всех чисел от A до B мы считаем только те числа, которые попали в промежуток AC. В среднем таких чисел - мат. ожидание этих чисел * количество этих чисел   
Зная что sum0 представляет собой количество всех значений (То есть N) , выразим формулу RTP на клиенте , имея новый вид для sum1

$$
RTP=\left( \frac{A + C}{2} \cdot \frac{AC}{AB} \cdot N \right) 
$$

Сокращаем N, а так же раскрываем AC,AB как длины 

$$
RTP= \frac{A + C}{2} \cdot \frac{C-A}{B-A}  
$$

Из всех переменных имеем одну неизвестную - С, выразим её

$$
RTP= \frac{(A + C)(C-A)}{2(B-A)}
$$

$$
RTP= \frac{C^2-A^2}{2(B-A)}
$$

$$
C = \sqrt{A^2+2*(B-A)*rtp}
$$

Физический смысл С - точка на отрезке AB, вокруг которой будет генерироваться значение для мультипликатора

Для генерации значений был выбран способ генерации числа по нормальному распределению
```
c := math.Sqrt(float64(A*A + 2*(B-A)*r.config.RptNumber))
	normal := distuv.Normal{
		Mu:    c,
		Sigma: math.Sqrt(c),
	}
	a := normal.Rand()
	//проверка чтоб число не выходило за границы
	if a < A {
		return A
	} else if a > B {
		return B
	}
	return a
```

Sigma была выбрана после нескольких тестов, при таком разбросе, значения клиента стремятся к значению rtp сервера
<img width="370" height="287" alt="image" src="https://github.com/user-attachments/assets/85396d62-0e53-4571-a7c8-9eaf16a00781" />


### В случае если распределение не равномерное

В данном случае задача не является решаемой, так как 

1: содержит невыводимую переменную x_avr, среднее x, или же мат ожидание x, без знания которого формула не сходится  
2: Если на распределение значений в последовательности клиента не наложено никакое ограничение, задача не решается в общем случае.  
Докажем на примере - рассмотрим случай, когда у клиента все значения будут равны 10000.   
Возьмём количество генераций N = 10000  
- sum0 = N = 10000  
- sum1 = сумма тех иксов, которые прошли сравнение с мультипликатором от сервера.  

В данном случае можно представить работу сервера как определение, какая доля иксов пройдёт сравнение. Однако ни одна комбинация проходящих икс не даёт значение RTP, вычисляемое на клиенте, близкое к rtp сервера  
sum1 будет равно одному из чисел (0, 10000, 20000, 10000*10000), то есть 10000 * M, где M - целое число на промежутке [0; N]  
rtp по условию принадлежит (0; 1.0]  
RTP = 10000 * M / N = M, то есть единственно возможным значением rtp, при котором существует возможность вычислить близкое RTP будет 0  
Для произвольного rtp и последовательности из одинаковых элементов, равных 10000, задача не решается  и задача в целом не решается для любой последовательности, в которой генерируются только числа больше 1
