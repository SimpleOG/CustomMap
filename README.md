# Описание подхода к решению задачи

Данная статья описывает шаги , которые я предпринял для решения задачи. 

Для решения была придуманна следующая стратегия

Я рассмотрел отрезок всех значений клиента:

>А__________________________________B

Мат.ожидание случайного числа для данного случая составляло бы 5000(среднее)*N(число генераций)

Взяв произвольную переменную  С  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C   
A____________|_________________B

Интересующий нас отрезок - АС. 
Для того чтобы понимать какое среднее значение (Мат.Ожидание) будет сгенерировано на этом промежутке , я вычислил $\frac{A+C}{2}$ .  

Далее я вычислил сколько из этих чисел попало в промежуток от A до C.   
Для начала посчитал вероятность, что числа попадут в промежуток - P(AC)=1-P(CB)=1 - $\frac{CB}{AB}$ = $\frac{AC}{AB}$  
Кол-во значений в таком случае =    $\frac{AC}{AB}$* N, где N - кол-во значений  



Исходя из данных вычислений можно сделать вывод, что sum1 = $\frac{A+C}{2}$ * $\frac{AC}{AB}$*N.   
Так как формула буквально отражает итоговое значение из  тех чисел, которые прошли проверку и не превратились в О  
Итог по формуле  : Из всех чисел от A до B мы считаем только те числа, которые попали в промежуток AC. В среднем таких чисел - мат. ожидание этих чисел * количество этих чисел   
Зная что sum0 представляет собой количество всех значений (То есть N) , выразим формулу RTP на клиенте , имея новый вид для sum1

$$
RTP=\left( \frac{A + C}{2} \cdot \frac{AC}{AB} \cdot N \right) 
$$

Сокращаем N, а так же раскрываем AC,AB как длины 

$$
RTP= \frac{A + C}{2} \cdot \frac{C-A}{B-A}  
$$

Из всех переменных имеем одну неизвестную - С, выразим её

$$
RTP= \frac{(A + C)(C-A)}{2(B-A)}
$$

$$
RTP= \frac{C^2-A^2}{2(B-A)}
$$

$$
C = \sqrt{A^2+2*(B-A)*rtp}
$$

Физический смысл С - точка на отрезке AB, вокруг которой будет генерироваться значение для мультипликатора

Для генерации значений был выбран способ генерации числа по нормальному распределению
```
c := math.Sqrt(float64(A*A + 2*(B-A)*r.config.RptNumber))
	normal := distuv.Normal{
		Mu:    c,
		Sigma: math.Sqrt(c),
	}
	a := normal.Rand()
	//проверка чтоб число не выходило за границы
	if a < A {
		return A
	} else if a > B {
		return B
	}
	return a
```

Sigma была выбрана после нескольких тестов, при таком разбросе, значения клиента стремятся к значению rtp сервера
<img width="1280" height="521" alt="image" src="https://github.com/user-attachments/assets/3eddc203-5d46-4a24-8eaa-1c1c23eb73d8" />


Решение получено!
